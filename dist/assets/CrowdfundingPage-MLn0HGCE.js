import{r as H,j as v,g as vt,c as bt,R as s,P as L,W as wt,d as tt}from"./index-gcsECw-u.js";function J(t){return t._type==="span"&&"text"in t&&typeof t.text=="string"&&(typeof t.marks>"u"||Array.isArray(t.marks)&&t.marks.every(a=>typeof a=="string"))}function st(t){return typeof t._type=="string"&&t._type[0]!=="@"&&(!("markDefs"in t)||!t.markDefs||Array.isArray(t.markDefs)&&t.markDefs.every(a=>typeof a._key=="string"))&&"children"in t&&Array.isArray(t.children)&&t.children.every(a=>typeof a=="object"&&"_type"in a)}function lt(t){return st(t)&&"listItem"in t&&typeof t.listItem=="string"&&(typeof t.level>"u"||typeof t.level=="number")}function ct(t){return t._type==="@list"}function ut(t){return t._type==="@span"}function pt(t){return t._type==="@text"}const rt=["strong","em","code","underline","strike-through"];function xt(t,a,o){if(!J(t)||!t.marks)return[];if(!t.marks.length)return[];const l=t.marks.slice(),u={};return l.forEach(p=>{u[p]=1;for(let h=a+1;h<o.length;h++){const b=o[h];if(b&&J(b)&&Array.isArray(b.marks)&&b.marks.indexOf(p)!==-1)u[p]++;else break}}),l.sort((p,h)=>kt(u,p,h))}function kt(t,a,o){const l=t[a],u=t[o];if(l!==u)return u-l;const p=rt.indexOf(a),h=rt.indexOf(o);return p!==h?p-h:a.localeCompare(o)}function Et(t){var a;const{children:o}=t,l=t.markDefs??[];if(!o||!o.length)return[];const u=o.map(xt),p={_type:"@span",children:[],markType:"<unknown>"};let h=[p];for(let b=0;b<o.length;b++){const S=o[b];if(!S)continue;const O=u[b]||[];let z=1;if(h.length>1)for(z;z<h.length;z++){const d=((a=h[z])==null?void 0:a.markKey)||"",m=O.indexOf(d);if(m===-1)break;O.splice(m,1)}h=h.slice(0,z);let f=h[h.length-1];if(f){for(const d of O){const m=l==null?void 0:l.find(E=>E._key===d),k=m?m._type:d,y={_type:"@span",_key:S._key,children:[],markDef:m,markType:k,markKey:d};f.children.push(y),h.push(y),f=y}if(J(S)){const d=S.text.split(`
`);for(let m=d.length;m-- >1;)d.splice(m,0,`
`);f.children=f.children.concat(d.map(m=>({_type:"@text",text:m})))}else f.children=f.children.concat(S)}}return p.children}function It(t,a){const o=[];let l;for(let u=0;u<t.length;u++){const p=t[u];if(p){if(!lt(p)){o.push(p),l=void 0;continue}if(!l){l=Y(p,u,a),o.push(l);continue}if(St(p,l)){l.children.push(p);continue}if((p.level||1)>l.level){const h=Y(p,u,a);if(a==="html"){const b=l.children[l.children.length-1],S={...b,children:[...b.children,h]};l.children[l.children.length-1]=S}else l.children.push(h);l=h;continue}if((p.level||1)<l.level){const h=o[o.length-1],b=h&&et(h,p);if(b){l=b,l.children.push(p);continue}l=Y(p,u,a),o.push(l);continue}if(p.listItem!==l.listItem){const h=o[o.length-1],b=h&&et(h,{level:p.level||1});if(b&&b.listItem===p.listItem){l=b,l.children.push(p);continue}else{l=Y(p,u,a),o.push(l);continue}}console.warn("Unknown state encountered for block",p),o.push(p)}}return o}function St(t,a){return(t.level||1)===a.level&&t.listItem===a.listItem}function Y(t,a,o){return{_type:"@list",_key:`${t._key||`${a}`}-parent`,mode:o,level:t.level||1,listItem:t.listItem,children:[t]}}function et(t,a){const o=a.level||1,l=a.listItem||"normal",u=typeof a.listItem=="string";if(ct(t)&&(t.level||1)===o&&u&&(t.listItem||"normal")===l)return t;if(!("children"in t))return;const p=t.children[t.children.length-1];return p&&!J(p)?et(p,a):void 0}function ft(t){let a="";return t.children.forEach(o=>{pt(o)?a+=o.text:ut(o)&&(a+=ft(o))}),a}const At="html",Nt={number:({children:t})=>v.jsx("ol",{children:t}),bullet:({children:t})=>v.jsx("ul",{children:t})},Ot=({children:t})=>v.jsx("li",{children:t}),Tt=({children:t,value:a})=>v.jsx("a",{href:a==null?void 0:a.href,children:t}),jt={textDecoration:"underline"},zt={em:({children:t})=>v.jsx("em",{children:t}),strong:({children:t})=>v.jsx("strong",{children:t}),code:({children:t})=>v.jsx("code",{children:t}),underline:({children:t})=>v.jsx("span",{style:jt,children:t}),"strike-through":({children:t})=>v.jsx("del",{children:t}),link:Tt},K=(t,a)=>`[@portabletext/react] Unknown ${t}, specify a component for it in the \`components.${a}\` prop`,dt=t=>K(`block type "${t}"`,"types"),_t=t=>K(`mark type "${t}"`,"marks"),Lt=t=>K(`block style "${t}"`,"block"),Mt=t=>K(`list style "${t}"`,"list"),Ct=t=>K(`list item style "${t}"`,"listItem");function Ut(t){console.warn(t)}const it={display:"none"},Dt=({value:t,isInline:a})=>{const o=dt(t._type);return a?v.jsx("span",{style:it,children:o}):v.jsx("div",{style:it,children:o})},Pt=({markType:t,children:a})=>v.jsx("span",{className:`unknown__pt__mark__${t}`,children:a}),Bt=({children:t})=>v.jsx("p",{children:t}),$t=({children:t})=>v.jsx("ul",{children:t}),Rt=({children:t})=>v.jsx("li",{children:t}),Ht=()=>v.jsx("br",{}),qt={normal:({children:t})=>v.jsx("p",{children:t}),blockquote:({children:t})=>v.jsx("blockquote",{children:t}),h1:({children:t})=>v.jsx("h1",{children:t}),h2:({children:t})=>v.jsx("h2",{children:t}),h3:({children:t})=>v.jsx("h3",{children:t}),h4:({children:t})=>v.jsx("h4",{children:t}),h5:({children:t})=>v.jsx("h5",{children:t}),h6:({children:t})=>v.jsx("h6",{children:t})},at={types:{},block:qt,marks:zt,list:Nt,listItem:Ot,hardBreak:Ht,unknownType:Dt,unknownMark:Pt,unknownList:$t,unknownListItem:Rt,unknownBlockStyle:Bt};function Ft(t,a){const{block:o,list:l,listItem:u,marks:p,types:h,...b}=a;return{...t,block:G(t,a,"block"),list:G(t,a,"list"),listItem:G(t,a,"listItem"),marks:G(t,a,"marks"),types:G(t,a,"types"),...b}}function G(t,a,o){const l=a[o],u=t[o];return typeof l=="function"||l&&typeof u=="function"?l:l?{...u,...l}:u}function F({value:t,components:a,listNestingMode:o,onMissingComponent:l=Ut}){const u=l||Vt,p=Array.isArray(t)?t:[t],h=It(p,o||At),b=H.useMemo(()=>a?Ft(at,a):at,[a]),S=H.useMemo(()=>Wt(b,u),[b,u]),O=h.map((z,f)=>S({node:z,index:f,isInline:!1,renderNode:S}));return v.jsx(v.Fragment,{children:O})}const Wt=(t,a)=>{function o(f){const{node:d,index:m,isInline:k}=f,y=d._key||`node-${m}`;return ct(d)?p(d,m,y):lt(d)?u(d,m,y):ut(d)?h(d,m,y):l(d)?z(d,m,y,k):st(d)?b(d,m,y,k):pt(d)?S(d,y):O(d,m,y,k)}function l(f){return f._type in t.types}function u(f,d,m){const k=ot({node:f,index:d,isInline:!1,renderNode:o}),y=t.listItem,E=(typeof y=="function"?y:y[f.listItem])||t.unknownListItem;if(E===t.unknownListItem){const A=f.listItem||"bullet";a(Ct(A),{type:A,nodeType:"listItemStyle"})}let I=k.children;if(f.style&&f.style!=="normal"){const{listItem:A,...U}=f;I=o({node:U,index:d,isInline:!1})}return v.jsx(E,{value:f,index:d,isInline:!1,renderNode:o,children:I},m)}function p(f,d,m){const k=f.children.map((I,A)=>o({node:I._key?I:{...I,_key:`li-${d}-${A}`},index:A,isInline:!1})),y=t.list,E=(typeof y=="function"?y:y[f.listItem])||t.unknownList;if(E===t.unknownList){const I=f.listItem||"bullet";a(Mt(I),{nodeType:"listStyle",type:I})}return v.jsx(E,{value:f,index:d,isInline:!1,renderNode:o,children:k},m)}function h(f,d,m){const{markDef:k,markType:y,markKey:E}=f,I=t.marks[y]||t.unknownMark,A=f.children.map((U,P)=>o({node:U,index:P,isInline:!0}));return I===t.unknownMark&&a(_t(y),{nodeType:"mark",type:y}),v.jsx(I,{text:ft(f),value:k,markType:y,markKey:E,renderNode:o,children:A},m)}function b(f,d,m,k){const{_key:y,...E}=ot({node:f,index:d,isInline:k,renderNode:o}),I=E.node.style||"normal",A=(typeof t.block=="function"?t.block:t.block[I])||t.unknownBlockStyle;return A===t.unknownBlockStyle&&a(Lt(I),{nodeType:"blockStyle",type:I}),v.jsx(A,{...E,value:E.node,renderNode:o},m)}function S(f,d){if(f.text===`
`){const m=t.hardBreak;return m?v.jsx(m,{},d):`
`}return f.text}function O(f,d,m,k){const y={value:f,isInline:k,index:d,renderNode:o};a(dt(f._type),{nodeType:"block",type:f._type});const E=t.unknownType;return v.jsx(E,{...y},m)}function z(f,d,m,k){const y={value:f,isInline:k,index:d,renderNode:o},E=t.types[f._type];return E?v.jsx(E,{...y},m):null}return o};function ot(t){const{node:a,index:o,isInline:l,renderNode:u}=t,p=Et(a).map((h,b)=>u({node:h,isInline:!0,index:b,renderNode:u}));return{_key:a._key||`block-${o}`,children:p,index:o,isInline:l,node:a}}function Vt(){}var ht={exports:{}};(function(t,a){(function(o,l){t.exports=l()})(bt,function(){function o(r,n){(n==null||n>r.length)&&(n=r.length);for(var i=0,e=Array(n);i<n;i++)e[i]=r[i];return e}function l(r,n){var i=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i)return(i=i.call(r)).next.bind(i);if(Array.isArray(r)||(i=p(r))||n){i&&(r=i);var e=0;return function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(){return u=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var e in i)({}).hasOwnProperty.call(i,e)&&(r[e]=i[e])}return r},u.apply(null,arguments)}function p(r,n){if(r){if(typeof r=="string")return o(r,n);var i={}.toString.call(r).slice(8,-1);return i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set"?Array.from(r):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(r,n):void 0}}var h="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg";function b(r){var n=r.split("-"),i=n[1],e=n[2],x=n[3];if(!i||!e||!x)throw new Error("Malformed asset _ref '"+r+`'. Expected an id like "`+h+'".');var c=e.split("x"),w=c[0],T=c[1],M=+w,_=+T,j=isFinite(M)&&isFinite(_);if(!j)throw new Error("Malformed asset _ref '"+r+`'. Expected an id like "`+h+'".');return{id:i,width:M,height:_,format:x}}var S=function(n){var i=n;return i?typeof i._ref=="string":!1},O=function(n){var i=n;return i?typeof i._id=="string":!1},z=function(n){var i=n;return i&&i.asset?typeof i.asset.url=="string":!1},f=function(n){if(typeof n=="object"&&n!==null){var i=n;return i._upload&&(!i.asset||!i.asset._ref)}return!1};function d(r){if(!r)return null;var n;if(typeof r=="string"&&m(r))n={asset:{_ref:k(r)}};else if(typeof r=="string")n={asset:{_ref:r}};else if(S(r))n={asset:r};else if(O(r))n={asset:{_ref:r._id||""}};else if(z(r))n={asset:{_ref:k(r.asset.url)}};else if(typeof r.asset=="object")n=u({},r);else return null;var i=r;return i.crop&&(n.crop=i.crop),i.hotspot&&(n.hotspot=i.hotspot),y(n)}function m(r){return/^https?:\/\//.test(""+r)}function k(r){var n=r.split("/").slice(-1);return("image-"+n[0]).replace(/\.([a-z]+)$/,"-$1")}function y(r){if(r.crop&&r.hotspot)return r;var n=u({},r);return n.crop||(n.crop={left:0,top:0,bottom:0,right:0}),n.hotspot||(n.hotspot={x:.5,y:.5,height:1,width:1}),n}var E=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"],["saturation","sat"],["auto","auto"],["dpr","dpr"],["pad","pad"],["frame","frame"]];function I(r){var n=u({},r||{}),i=n.source;delete n.source;var e=d(i);if(!e){if(i&&f(i))return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8HwQACfsD/QNViZkAAAAASUVORK5CYII=";throw new Error("Unable to resolve image URL from source ("+JSON.stringify(i)+")")}var x=e.asset._ref||e.asset._id||"",c=b(x),w=Math.round(e.crop.left*c.width),T=Math.round(e.crop.top*c.height),M={left:w,top:T,width:Math.round(c.width-e.crop.right*c.width-w),height:Math.round(c.height-e.crop.bottom*c.height-T)},_=e.hotspot.height*c.height/2,j=e.hotspot.width*c.width/2,q=e.hotspot.x*c.width,R=e.hotspot.y*c.height,C={left:q-j,top:R-_,right:q+j,bottom:R+_};return n.rect||n.focalPoint||n.ignoreImageParams||n.crop||(n=u({},n,U({crop:M,hotspot:C},n))),A(u({},n,{asset:c}))}function A(r){var n=(r.baseUrl||"https://cdn.sanity.io").replace(/\/+$/,""),i=r.vanityName?"/"+r.vanityName:"",e=r.asset.id+"-"+r.asset.width+"x"+r.asset.height+"."+r.asset.format+i,x=n+"/images/"+r.projectId+"/"+r.dataset+"/"+e,c=[];if(r.rect){var w=r.rect,T=w.left,M=w.top,_=w.width,j=w.height,q=T!==0||M!==0||j!==r.asset.height||_!==r.asset.width;q&&c.push("rect="+T+","+M+","+_+","+j)}r.bg&&c.push("bg="+r.bg),r.focalPoint&&(c.push("fp-x="+r.focalPoint.x),c.push("fp-y="+r.focalPoint.y));var R=[r.flipHorizontal&&"h",r.flipVertical&&"v"].filter(Boolean).join("");return R&&c.push("flip="+R),E.forEach(function(C){var W=C[0],D=C[1];typeof r[W]<"u"?c.push(D+"="+encodeURIComponent(r[W])):typeof r[D]<"u"&&c.push(D+"="+encodeURIComponent(r[D]))}),c.length===0?x:x+"?"+c.join("&")}function U(r,n){var i,e=n.width,x=n.height;if(!(e&&x))return{width:e,height:x,rect:r.crop};var c=r.crop,w=r.hotspot,T=e/x,M=c.width/c.height;if(M>T){var _=Math.round(c.height),j=Math.round(_*T),q=Math.max(0,Math.round(c.top)),R=Math.round((w.right-w.left)/2+w.left),C=Math.max(0,Math.round(R-j/2));C<c.left?C=c.left:C+j>c.left+c.width&&(C=c.left+c.width-j),i={left:C,top:q,width:j,height:_}}else{var W=c.width,D=Math.round(W/T),yt=Math.max(0,Math.round(c.left)),gt=Math.round((w.bottom-w.top)/2+w.top),V=Math.max(0,Math.round(gt-D/2));V<c.top?V=c.top:V+D>c.top+c.height&&(V=c.top+c.height-D),i={left:yt,top:V,width:W,height:D}}return{width:e,height:x,rect:i}}var P=["clip","crop","fill","fillmax","max","scale","min"],X=["top","bottom","left","right","center","focalpoint","entropy"],B=["format"];function Z(r){return r&&"config"in r?typeof r.config=="function":!1}function Q(r){return r&&"clientConfig"in r?typeof r.clientConfig=="object":!1}function g(r){for(var n=E,i=l(n),e;!(e=i()).done;){var x=e.value,c=x[0],w=x[1];if(r===c||r===w)return c}return r}function N(r){if(Z(r)){var n=r.config(),i=n.apiHost,e=n.projectId,x=n.dataset,c=i||"https://api.sanity.io";return new $(null,{baseUrl:c.replace(/^https:\/\/api\./,"https://cdn."),projectId:e,dataset:x})}if(Q(r)){var w=r.clientConfig,T=w.apiHost,M=w.projectId,_=w.dataset,j=T||"https://api.sanity.io";return new $(null,{baseUrl:j.replace(/^https:\/\/api\./,"https://cdn."),projectId:M,dataset:_})}return new $(null,r||{})}var $=function(){function r(i,e){this.options=void 0,this.options=i?u({},i.options||{},e||{}):u({},e||{})}var n=r.prototype;return n.withOptions=function(e){var x=e.baseUrl||this.options.baseUrl,c={baseUrl:x};for(var w in e)if(e.hasOwnProperty(w)){var T=g(w);c[T]=e[w]}return new r(this,u({baseUrl:x},c))},n.image=function(e){return this.withOptions({source:e})},n.dataset=function(e){return this.withOptions({dataset:e})},n.projectId=function(e){return this.withOptions({projectId:e})},n.bg=function(e){return this.withOptions({bg:e})},n.dpr=function(e){return this.withOptions(e&&e!==1?{dpr:e}:{})},n.width=function(e){return this.withOptions({width:e})},n.height=function(e){return this.withOptions({height:e})},n.focalPoint=function(e,x){return this.withOptions({focalPoint:{x:e,y:x}})},n.maxWidth=function(e){return this.withOptions({maxWidth:e})},n.minWidth=function(e){return this.withOptions({minWidth:e})},n.maxHeight=function(e){return this.withOptions({maxHeight:e})},n.minHeight=function(e){return this.withOptions({minHeight:e})},n.size=function(e,x){return this.withOptions({width:e,height:x})},n.blur=function(e){return this.withOptions({blur:e})},n.sharpen=function(e){return this.withOptions({sharpen:e})},n.rect=function(e,x,c,w){return this.withOptions({rect:{left:e,top:x,width:c,height:w}})},n.format=function(e){return this.withOptions({format:e})},n.invert=function(e){return this.withOptions({invert:e})},n.orientation=function(e){return this.withOptions({orientation:e})},n.quality=function(e){return this.withOptions({quality:e})},n.forceDownload=function(e){return this.withOptions({download:e})},n.flipHorizontal=function(){return this.withOptions({flipHorizontal:!0})},n.flipVertical=function(){return this.withOptions({flipVertical:!0})},n.ignoreImageParams=function(){return this.withOptions({ignoreImageParams:!0})},n.fit=function(e){if(P.indexOf(e)===-1)throw new Error('Invalid fit mode "'+e+'"');return this.withOptions({fit:e})},n.crop=function(e){if(X.indexOf(e)===-1)throw new Error('Invalid crop mode "'+e+'"');return this.withOptions({crop:e})},n.saturation=function(e){return this.withOptions({saturation:e})},n.auto=function(e){if(B.indexOf(e)===-1)throw new Error('Invalid auto mode "'+e+'"');return this.withOptions({auto:e})},n.pad=function(e){return this.withOptions({pad:e})},n.vanityName=function(e){return this.withOptions({vanityName:e})},n.frame=function(e){if(e!==1)throw new Error('Invalid frame value "'+e+'"');return this.withOptions({frame:e})},n.url=function(){return I(this.options)},n.toString=function(){return this.url()},r}();return N})})(ht);var Gt=ht.exports;const Kt=vt(Gt),Qt=Kt(tt);function Yt(t){return Qt.image(t)}const nt=({value:t,label:a})=>s.createElement("div",null,s.createElement("p",{className:"text-3xl font-bold"},t),s.createElement("p",{className:"text-gray-600"},a));nt.propTypes={value:L.oneOfType([L.string,L.number]).isRequired,label:L.string.isRequired};const mt=({tier:t})=>{if(!t)return null;const a=t.pieCount?`${t.pieCount.toLocaleString()} pies`:null,o=t.pizzaCount?`${t.pizzaCount.toLocaleString()} pizzas`:null,l=t.amount?`$${t.amount.toLocaleString()}`:null;return s.createElement("div",{className:"card p-6 border hover:border-[var(--color-accent)] transition-colors"},s.createElement("p",{className:"text-2xl font-bold"},a?`${a} — ${t.title}`:o?`${o} — ${t.title}`:`Pledge ${l||"$0"} or more`),!o&&s.createElement("h4",{className:"text-xl font-bold text-[var(--color-accent)] mt-1"},t.title),s.createElement("p",{className:"text-body text-gray-600 my-3"},t.description),t.limit&&s.createElement("p",{className:"text-sm font-semibold text-gray-500 mb-3"},"LIMITED (",t.limit," left)"),s.createElement("button",{className:"btn btn-secondary w-full"},"Select this reward"))};mt.propTypes={tier:L.shape({pizzaCount:L.number,pieCount:L.number,amount:L.number,title:L.string,description:L.string,limit:L.number})};const Xt=()=>{const[t,a]=H.useState(null),[o,l]=H.useState(!0),[u,p]=H.useState(null),[h,b]=H.useState("story");if(H.useEffect(()=>{const g="local-pizza-by-local-effort-let-s-make-1000-pizzas",N=`*[_type == "crowdfundingCampaign" && slug.current == $slug][0]{
      title,
      // Short description: prefer new field name, fallback to legacy if present
      "description": coalesce(description, shortDescription),
      // pizza-specific fields (keep legacy fields for backwards compatibility)
      pizzaGoal,
      pizzasSold,
      piesSold,
      goal,
      raisedAmount,
      backers,
      endDate,
      heroImage,
      story,
      goals,
      faq,
      "rewardTiers": rewardTiers[]->{ amount, pizzaCount, title, description, limit } | order(amount asc),
      "updates": updates[]->{ title, publishedAt, body } | order(publishedAt desc)
    }`,$={slug:g};(async()=>{try{const n=await tt.fetch(N,$);a(n)}catch(n){try{const i=n&&n.message?n.message:String(n);if(console.error("Sanity fetch error message:",i),n&&n.response&&typeof n.response.text=="function"){const e=await n.response.text();console.error("Sanity fetch response body:",e)}}catch(i){console.error("Error while logging Sanity error:",i)}try{const e=await tt.fetch(`*[_type == "crowdfundingCampaign"][0]{
            title,
            "description": coalesce(description, shortDescription),
            pizzaGoal,
            pizzasSold,
            piesSold,
            goal,
            raisedAmount,
            backers,
            endDate,
            heroImage,
            story,
            goals,
            faq,
            "rewardTiers": rewardTiers[]->{ amount, pizzaCount, title, description, limit } | order(amount asc),
            "updates": updates[]->{ title, publishedAt, body } | order(publishedAt desc)
          }`);if(e){console.warn("Loaded fallback campaign (first in dataset)"),a(e),p(null);return}}catch(i){console.error("Fallback fetch also failed:",i&&(i.message||i))}p("Failed to load campaign data.")}finally{l(!1)}})()},[]),o)return s.createElement("div",{className:"text-center p-12"},"Loading campaign...");if(u){const g=typeof u=="string"?u:u&&(u.message||JSON.stringify(u))||"Failed to load campaign data.";return s.createElement("div",{className:"text-center p-12 text-red-600"},g)}if(!t)return s.createElement("div",{className:"text-center p-12"},"No campaign found. Have you created and published it in Sanity Studio?");const{title:S="Untitled Campaign",description:O=[],backers:z=0,endDate:f=null,heroImage:d=null}=t,m=t.piesSold??0,k=t.story||[],y=t.faq||[],E=t.rewardTiers||[],I=t.updates||[],A=(t.pizzasSold??t.raisedAmount)||0,U=(t.pizzaGoal??t.goal)||1e3,P=f?Math.ceil((new Date(f)-new Date)/(1e3*60*60*24)):0,X=U>0?Math.min(A/U*100,100):0,B=({tabName:g,label:N})=>s.createElement("button",{type:"button",onClick:()=>b(g),"aria-pressed":h===g,className:`pb-2 px-1 text-lg font-semibold transition-colors ${h===g?"border-b-2 border-[var(--color-accent)] text-gray-900":"text-gray-500 hover:text-gray-800"}`},N);B.propTypes={tabName:L.string.isRequired,label:L.string.isRequired};const Z=g=>g?typeof g=="string"?g:(g||[]).filter(Boolean).map(N=>typeof N=="string"?N:N.children&&Array.isArray(N.children)?N.children.map($=>$.text||"").join(""):"").join(`
`).trim():"",Q=g=>Array.isArray(g)?g:g?[{_type:"block",style:"normal",children:[{_type:"span",text:typeof g=="string"?g:String(g)}]}]:[];return s.createElement(s.Fragment,null,s.createElement(wt,null,s.createElement("title",null,`${S} | Crowdfunding Campaign`),s.createElement("meta",{name:"description",content:Z(O).slice(0,160)})),s.createElement("div",{className:"space-y-12"},s.createElement("div",null,s.createElement("h1",{className:"text-hero uppercase"},S),s.createElement("div",{className:"mt-6 md:mt-8 text-body max-w-3xl"},O&&(Array.isArray(O)?s.createElement(F,{value:O}):s.createElement(F,{value:Q(O)})))),s.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-5 lg:gap-16"},s.createElement("div",{className:"lg:col-span-3 space-y-8"},d&&s.createElement("img",{src:Yt(d).width(1200).quality(80).url(),alt:S,className:"w-full object-cover rounded-lg aspect-video bg-gray-100"}),s.createElement("div",{className:"border-b border-gray-200"},s.createElement("nav",{className:"flex space-x-8"},s.createElement(B,{tabName:"story",label:"Our Story"}),I.length>0&&s.createElement(B,{tabName:"updates",label:`Updates (${I.length})`}),s.createElement(B,{tabName:"goals",label:"Goals"}),y.length>0&&s.createElement(B,{tabName:"faq",label:"FAQ"}))),s.createElement("div",{className:"prose max-w-none text-body"},h==="story"&&k.length>0&&s.createElement(F,{value:k}),h==="updates"&&s.createElement("div",{className:"space-y-8"},I.map((g,N)=>s.createElement("div",{key:N,className:"p-4 border-l-4 border-gray-200"},s.createElement("h3",{className:"text-heading mt-0"},g.title),s.createElement("p",{className:"text-sm text-gray-500 mb-2"},new Date(g.publishedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),s.createElement(F,{value:g.body})))),h==="goals"&&s.createElement("div",{className:"space-y-6"},t.goals?Array.isArray(t.goals)?s.createElement(F,{value:t.goals}):s.createElement(F,{value:Q(t.goals)}):s.createElement("p",{className:"text-gray-500"},"No goals content yet. Add content in the Goals field in Sanity Studio.")),h==="faq"&&s.createElement("div",{className:"space-y-6"},y.map((g,N)=>s.createElement("div",{key:N},s.createElement("h4",{className:"font-bold text-lg mb-1"},g.question),s.createElement("p",{className:"mt-0"},g.answer)))))),s.createElement("div",{className:"lg:col-span-2 space-y-8 mt-12 lg:mt-0"},s.createElement("div",{className:"card p-6 space-y-4"},s.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2.5"},s.createElement("div",{className:"bg-[var(--color-accent)] h-2.5 rounded-full",style:{width:`${X}%`}})),s.createElement("div",null,s.createElement("p",{className:"text-4xl font-bold text-[var(--color-accent)]"},A.toLocaleString()," pizzas"),s.createElement("p",{className:"text-body text-gray-600"},"sold of ",U.toLocaleString()," pizzas goal"),s.createElement("p",{className:"mt-2 text-2xl font-semibold"},m.toLocaleString()," pies"),s.createElement("p",{className:"text-body text-gray-600"},"sold")),s.createElement("div",{className:"flex justify-between text-body text-center border-y py-3"},s.createElement(nt,{value:z.toLocaleString(),label:"backers"}),s.createElement(nt,{value:P>0?P:"Ended",label:P>0?"days to go":""})),s.createElement("button",{className:"btn btn-primary w-full text-lg py-3"},"Order a pizza")),s.createElement("div",{className:"space-y-4"},s.createElement("h3",{className:"text-heading uppercase"},"Support Us"),E.map(g=>s.createElement(mt,{key:(g==null?void 0:g.title)||Math.random(),tier:g})))))))};export{Xt as default};
