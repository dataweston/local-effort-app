import{u as f,R as r,e as a,C as b,D as o,E as h,F as x}from"./index-1DUUIV-0.js";import{u as y}from"./useAuthUser-BjHw_Twy.js";function E(){const t=f(),{user:n,loading:l}=y(),[u,s]=r.useState(""),[d,p]=r.useState(!1);r.useEffect(()=>{(async()=>{if(a)try{const e=await b(a);e&&e.user&&t("/partner-portal/welcome",{replace:!0})}catch(e){s(c(e))}})(),!l&&n&&t("/partner-portal/welcome",{replace:!0})},[n,l,t]);const m=async()=>{if(s(""),!a||!o){s("Sign-in is unavailable. Missing Firebase configuration.");return}p(!0);try{await h(a,o),t("/partner-portal/welcome",{replace:!0})}catch(e){const i=e&&e.code?String(e.code):"";if(i.includes("popup-blocked")||i.includes("popup-closed-by-user")||i.includes("cancelled-popup-request"))try{await x(a,o);return}catch(g){s(c(g))}else s(c(e))}finally{p(!1)}};return r.createElement("div",{className:"mx-auto max-w-md p-6 text-center"},r.createElement("h1",{className:"text-2xl font-semibold mb-4"},"Sign in"),u&&r.createElement("div",{className:"mb-4 p-3 rounded bg-red-50 text-red-700 text-sm text-left"},u),r.createElement("button",{onClick:m,disabled:d,className:"px-4 py-2 rounded bg-black text-white disabled:opacity-60"},d?"Workingâ€¦":"Continue with Google"),!a&&r.createElement("p",{className:"mt-4 text-sm text-gray-600"},"Tip: Add Firebase env vars on the server and authorize your Vercel domain in Firebase Auth."))}function c(t){return t?(t.message||String(t)).replace(/^Firebase: /,"").replace(/\(auth\/[\w-]+\)\.?$/,"").trim():"Unexpected error."}export{E as default};
