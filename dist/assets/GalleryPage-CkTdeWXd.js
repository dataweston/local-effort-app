import{r,R as e,W as f}from"./index-BgyG4ZeM.js";import{C as y}from"./cloudinaryImage-Bs-o-fyC.js";const N=()=>{const[s,g]=r.useState([]),[l,E]=r.useState(""),[c,m]=r.useState(!0),[o,i]=r.useState(null);return r.useEffect(()=>{const t=setTimeout(async()=>{m(!0),i(null);try{const n=l?`tags:${l}`:"",u=`/api/search-images?query=${encodeURIComponent(n)}`;console.log("Making API call to:",u),console.log("Current location:",window.location.href);const a=await fetch(u);console.log("Response status:",a.status),console.log("Response content-type:",a.headers.get("content-type"));const d=a.headers.get("content-type");if(!d||!d.includes("application/json")){const h=await a.text();throw console.error("Non-JSON response:",h.substring(0,200)),new Error("API endpoint not found - got HTML instead of JSON")}if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const p=await a.json();console.log("API Response data:",p),g(p.images||[])}catch(n){console.error("Error fetching images:",n),i(n.message)}finally{m(!1)}},500);return()=>clearTimeout(t)},[l]),e.createElement(e.Fragment,null,e.createElement(f,null,e.createElement("title",null,"Pictures of Food | Local Effort")),e.createElement("div",{className:"container mx-auto px-4 py-8"},e.createElement("h1",{className:"text-4xl font-bold mb-4 text-center"},"Image Gallery"),e.createElement("div",{className:"bg-gray-100 p-4 mb-4 rounded text-sm"},e.createElement("h3",{className:"font-bold"},"Debug Info:"),e.createElement("p",null,"Loading: ",c.toString()),e.createElement("p",null,"Error: ",o||"None"),e.createElement("p",null,"Images count: ",s.length),e.createElement("p",null,'Current query: "',l,'"'),e.createElement("p",null,"Current URL: ",window.location.href),e.createElement("p",null,"API URL: /api/search-images.js")),e.createElement("input",{type:"text",value:l,onChange:t=>E(t.target.value),placeholder:"Search by tag (e.g., pizza, events)...",className:"w-full max-w-md mx-auto block p-3 border rounded-md mb-8"}),c?e.createElement("p",null,"Loading..."):o?e.createElement("div",{className:"text-red-600 bg-red-50 p-4 rounded"},e.createElement("h3",{className:"font-bold"},"Error Details:"),e.createElement("p",null,o),e.createElement("p",{className:"mt-2 text-sm"},"This usually means:"),e.createElement("ul",{className:"list-disc ml-6 text-sm"},e.createElement("li",null,"The /api/search-images.js file wasn't created properly"),e.createElement("li",null,"Environment variables aren't set in Vercel"),e.createElement("li",null,"The serverless function has an error")),e.createElement("p",{className:"mt-2 text-sm"},"Check the browser Network tab and Vercel function logs.")):s.length===0?e.createElement("div",{className:"text-center p-8"},e.createElement("p",null,"No images found."),e.createElement("p",{className:"text-sm text-gray-600 mt-2"},"Try removing search terms or check that you have images in your Cloudinary account.")):e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},s.map(t=>(console.log("Rendering image:",t.public_id),e.createElement("div",{key:t.asset_id,className:"border p-2"},e.createElement(y,{publicId:t.public_id,alt:t.context?.alt||"Gallery image",width:400,height:400,className:"rounded-lg object-cover w-full h-full aspect-square"}),e.createElement("p",{className:"text-xs mt-2 text-gray-600"},"ID: ",t.public_id)))))))};export{N as default};
