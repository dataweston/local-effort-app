import{d as x,r as n,c,R as t,W as p,L as g}from"./index-CUxUiH5k.js";import{P as y}from"./index-RHiQEz9r.js";import{i as f}from"./image-url.umd-B0yE27Pz.js";const E=f(c),i=a=>E.image(a),N={types:{image:({value:a})=>{var l;const e=(l=a==null?void 0:a.asset)!=null&&l._ref?i(a).width(1200).quality(80).url():"";if(!e)return null;const s=(a==null?void 0:a.alt)||"";return t.createElement("img",{src:e,alt:s,className:"rounded-md my-4",loading:"lazy"})}}},h=()=>{var o;const{slug:a}=x(),[e,s]=n.useState(null),[l,u]=n.useState("");return n.useEffect(()=>{let m=!0;return(async()=>{try{const d=await c.fetch('*[_type == "blogPost" && slug.current == $slug][0]{ title, publishedAt, body, mainImage }',{slug:a});m&&s(d||null)}catch(r){m&&u((r==null?void 0:r.message)||"Failed to load post")}})(),()=>{m=!1}},[a]),l?t.createElement("div",{className:"mx-auto max-w-3xl px-4 py-10 text-red-700"},l):e?t.createElement("div",{className:"mx-auto max-w-3xl px-4 md:px-6 lg:px-8 py-10"},t.createElement(p,null,t.createElement("title",null,e!=null&&e.title?`${e.title} | Weekly Meal Prep Journal`:"Weekly Meal Prep Journal"," | Local Effort")),t.createElement(g,{to:"/weekly",className:"text-sm underline"},"← Back to Weekly Meal Prep Journal"),t.createElement("h1",{className:"text-4xl font-bold mt-2"},e.title),t.createElement("div",{className:"text-sm text-gray-500 mt-1"},e.publishedAt?new Date(e.publishedAt).toLocaleDateString():""),((o=e.mainImage)==null?void 0:o.asset)&&t.createElement("div",{className:"mt-4"},t.createElement("img",{src:i(e.mainImage).width(1400).quality(80).url(),alt:e.mainImage.alt||"",className:"rounded-md"})),t.createElement("article",{className:"prose max-w-none mt-6"},t.createElement(y,{value:e.body,components:N}))):t.createElement("div",{className:"mx-auto max-w-3xl px-4 py-10"},"Loading…")};export{h as default};
