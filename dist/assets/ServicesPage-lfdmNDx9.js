import{u as S,b as D,r as o,R as e,W as T}from"./index-DNtoDAAn.js";import{C as z}from"./cloudinaryImage-C6nkT_V_.js";import{E as $}from"./EmblaCarousel-DXWraW4I.js";const q=()=>{const d=S(),p=D();o.useEffect(()=>{if(p.hash){const a=p.hash.replace("#",""),l=document.getElementById(a);l&&setTimeout(()=>l.scrollIntoView({behavior:"smooth",block:"start"}),50)}},[p.hash]);const E=o.useMemo(()=>({firstName:"",lastName:"",phone:"",email:"",eventDate:"",city:"",state:"",zip:"",eventType:"",guestCount:"",notes:"",sendCopy:!1}),[]),[t,b]=o.useState(E),[v,f]=o.useState(!1),[h,i]=o.useState(null),[g,x]=o.useState([]),[y,w]=o.useState(null),u=a=>String(a||"").trim().length>0,n=a=>{const{name:l,type:r,checked:m,value:c}=a.target;b(s=>({...s,[l]:r==="checkbox"?m:c}))},C=()=>b(E);o.useEffect(()=>{let a=!1;return(async()=>{try{const l=await fetch("/api/search-images?query=service&per_page=12");if(!l.ok)throw new Error(`Service images failed: ${l.status}`);const r=await l.json();if(a)return;const c=(r.images||[]).map((s,N)=>({key:s.public_id||String(N),src:s.large_url||s.thumbnail_url||"",alt:s.context&&s.context.custom&&s.context.custom.alt||s.public_id||`slide-${N}`}));x(c)}catch{}})(),()=>{a=!0}},[]),o.useEffect(()=>{let a=!1;return(async()=>{try{const l=await fetch("/api/search-images?query=book&per_page=1");if(!l.ok)throw new Error(`Book image failed: ${l.status}`);const r=await l.json();if(a)return;const m=(r.images||[])[0];m&&w(m.public_id)}catch{}})(),()=>{a=!0}},[]);const k=async a=>{if(a.preventDefault(),i(null),!u(t.firstName)||!u(t.lastName)||!u(t.phone)||!u(t.email)){i({ok:!1,message:"Please complete first name, last name, phone, and email."});return}try{f(!0);const l=`Event Request${t.guestCount?`: ${t.guestCount} guests`:""}${t.eventDate?` on ${t.eventDate}`:""}`,m=`${[t.eventType?`Event Type: ${t.eventType}`:null,t.eventDate?`Event Date: ${t.eventDate}`:null,t.guestCount?`Estimated Guests: ${t.guestCount}`:null,t.city||t.state||t.zip?`Location: ${[t.city,t.state,t.zip].filter(Boolean).join(", ")}`:null].filter(Boolean).join(`
`)}

Notes:
${t.notes||"(none)"}`,c=await fetch("/api/messages/submit",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:`${t.firstName} ${t.lastName}`.trim(),email:t.email,phone:t.phone,subject:l,message:m,type:"event",sendCopy:!!t.sendCopy})}),s=await c.json().catch(()=>({}));if(!c.ok)throw new Error(s.error||"Failed to submit");i({ok:!0,message:"thank you so much! we'll get right back to you."}),C()}catch(l){i({ok:!1,message:l.message||"Submission failed. Please try again."})}finally{f(!1)}};return e.createElement(e.Fragment,null,e.createElement(T,null,e.createElement("title",null,"Services | Local Effort"),e.createElement("meta",{name:"description",content:"Explore the personal chef and catering services offered by Local Effort."})),e.createElement("div",{className:"space-y-16 mx-auto max-w-6xl px-4 md:px-6 lg:px-8"},e.createElement("h2",{className:"text-4xl md:text-6xl font-bold uppercase border-b border-gray-900 pb-4"},"Services"),g.length>0&&e.createElement($,{slides:g.map(a=>{var l,r;return{key:a.key,src:a.src||a.large_url||((r=(l=a.node)==null?void 0:l.props)==null?void 0:r.publicId)||"",alt:a.alt||"",node:a.node}}),autoPlayMs:6500,contain:!0,heightClass:"h-[40vh] md:h-[54vh] lg:h-[60vh]",showThumbs:!0}),e.createElement("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8"},e.createElement("div",{className:"card space-y-4"},e.createElement("h3",{className:"text-heading"},"Dinners & Events"),e.createElement("p",{className:"text-body"},"in-home dinner parties and small events up to 50"),e.createElement("button",{onClick:()=>d("/events"),className:"text-body text-sm underline"},"Details →")),e.createElement("div",{className:"card space-y-4"},e.createElement("h3",{className:"text-heading"},"Weekly Meal Plans"),e.createElement("p",{className:"text-body"},"Nutritious, locally-sourced meals delivered weekly."),e.createElement("button",{onClick:()=>d("/meal-prep"),className:"text-body text-sm underline"},"Details →")),e.createElement("div",{className:"card space-y-4"},e.createElement("h3",{className:"text-heading"},"Pizza Parties"),e.createElement("p",{className:"text-body"},"local pizza at your party. we'll bring the oven."),e.createElement("button",{onClick:()=>d("/pizza-party"),className:"text-body text-sm underline"},"Details →"))),e.createElement("section",{id:"event-request",className:"border-t border-neutral-200 pt-10"},e.createElement("div",{className:"max-w-3xl mx-auto"},y&&e.createElement("div",{className:"w-full h-[30vh] md:h-[36vh] lg:h-[42vh] rounded-xl overflow-hidden mb-6"},e.createElement(z,{publicId:y,alt:"Book an event",className:"w-full h-full object-cover",sizes:"100vw",eager:!0})),e.createElement("h3",{className:"mb-1 text-center text-2xl font-bold"},"book an event"),e.createElement("p",{className:"text-body mb-6 text-center"},"Tell us about your event and we’ll follow up with availability and a tailored menu."),e.createElement("div",{className:"form-card"},e.createElement("form",{onSubmit:k,className:"space-y-4"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium",htmlFor:"firstName"},"Contact Name *"),e.createElement("div",{className:"grid md:grid-cols-2 gap-4 mt-1"},e.createElement("input",{id:"firstName",name:"firstName",value:t.firstName,onChange:n,className:"w-full border rounded-md p-2",placeholder:"First Name",required:!0}),e.createElement("input",{id:"lastName",name:"lastName",value:t.lastName,onChange:n,className:"w-full border rounded-md p-2",placeholder:"Last Name",required:!0})),e.createElement("p",{className:"hint mt-1"},"This field is required.")),e.createElement("div",{className:"grid md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium",htmlFor:"phone"},"Phone Number *"),e.createElement("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:n,className:"mt-1 w-full border rounded-md p-2",placeholder:"(000) 000-0000",required:!0})),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium",htmlFor:"email"},"E-mail *"),e.createElement("input",{type:"email",id:"email",name:"email",value:t.email,onChange:n,className:"mt-1 w-full border rounded-md p-2",placeholder:"example@example.com",required:!0}))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium",htmlFor:"eventDate"},"Event Date"),e.createElement("input",{type:"date",id:"eventDate",name:"eventDate",value:t.eventDate,onChange:n,className:"mt-1 w-full border rounded-md p-2"}),e.createElement("p",{className:"hint mt-1"},"Choose a date from the calendar.")),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium",htmlFor:"city"},"Where will the event take place?"),e.createElement("div",{className:"grid md:grid-cols-3 gap-4 mt-1"},e.createElement("input",{id:"city",name:"city",value:t.city,onChange:n,className:"w-full border rounded-md p-2",placeholder:"City"}),e.createElement("select",{id:"state",name:"state",value:t.state,onChange:n,className:"w-full border rounded-md p-2 bg-white"},e.createElement("option",{value:""},"Please Select"),["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"].map(a=>e.createElement("option",{key:a,value:a},a))),e.createElement("input",{id:"zip",name:"zip",value:t.zip,onChange:n,className:"w-full border rounded-md p-2",placeholder:"Zip Code"}))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium",htmlFor:"eventType"},"Event Type"),e.createElement("select",{id:"eventType",name:"eventType",value:t.eventType,onChange:n,className:"mt-1 w-full border rounded-md p-2 bg-white"},e.createElement("option",{value:""},"Please Select"),e.createElement("option",null,"Home Dinner"),e.createElement("option",null,"Small Event"),e.createElement("option",null,"Wedding"),e.createElement("option",null,"Baby Shower"),e.createElement("option",null,"Pizza Party"),e.createElement("option",null,"Other"))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium",htmlFor:"guestCount"},"Estimated guest count"),e.createElement("input",{type:"number",id:"guestCount",name:"guestCount",value:t.guestCount,onChange:n,className:"mt-1 w-full border rounded-md p-2",placeholder:"ex: 23",min:"1"})),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium",htmlFor:"notes"},"Tell us more! What sort of meal are you thinking? Which foods do you like? What questions do you have for us straight away?"),e.createElement("textarea",{id:"notes",name:"notes",value:t.notes,onChange:n,className:"mt-1 w-full border rounded-md p-2",rows:4,placeholder:"Type here..."})),e.createElement("label",{className:"inline-flex items-center gap-2"},e.createElement("input",{type:"checkbox",name:"sendCopy",checked:t.sendCopy,onChange:n}),e.createElement("span",{className:"text-sm"},"Email me a copy of this request")),h&&e.createElement("div",{className:"text-sm "+(h.ok?"text-green-700":"text-red-700")},h.message),e.createElement("div",{className:"actions"},e.createElement("button",{type:"submit",disabled:v,className:"btn btn-primary"},v?"Submitting…":"Submit"))))))))};export{q as default};
