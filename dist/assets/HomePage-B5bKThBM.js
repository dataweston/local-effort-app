import{R as e,m as h,s as P,L as T,r as m,u as j,c as S,W as L,f as C,a as z}from"./index-1W_aNcTa.js";import{C as F}from"./cloudinaryImage-D8N3jebW.js";import{c as O,h as $,a as R,p as _}from"./cloudinaryContent-D3ATXwfp.js";import{E as W}from"./EmblaCarousel-DnUWal-W.js";const w=({to:c="#",title:l,description:s,children:r})=>e.createElement(h.div,{...P,className:"group rounded-xl bg-neutral-50 p-8 shadow-sm ring-1 ring-neutral-200 transition-shadow hover:shadow-md",initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2}},e.createElement(T,{to:c,className:"block h-full"},e.createElement("h4",{className:"text-2xl font-bold uppercase tracking-tight"},l),e.createElement("p",{className:"font-mono text-neutral-600 min-h-[5.5rem] mt-2"},s),e.createElement("span",{className:"font-mono text-sm inline-block underline underline-offset-4 group-hover:translate-x-0.5 transition-transform"},"Learn More →")),r&&e.createElement("div",{className:"mt-4"},r));function A(c){const l=c.slice();for(let s=l.length-1;s>0;s--){const r=Math.floor(Math.random()*(s+1));[l[s],l[r]]=[l[r],l[s]]}return l}function D(c,l){const s=[];for(let r=0;r<c.length;r+=l)s.push(c.slice(r,r+l));return s}function J({items:c=[],title:l="Testimonials",headingExtra:s=null}){const r=m.useMemo(()=>{if(!c.length)return[];const y=A(c);return D(y,3).map((f,v)=>({key:`t-slide-${v}`,node:e.createElement("div",{className:"grid md:grid-cols-3 gap-6"},f.map((p,g)=>e.createElement("blockquote",{key:g,className:"p-6 rounded-xl bg-white shadow"},e.createElement("p",{className:"text-body italic"},"“",p.quote,"”"),e.createElement("footer",{className:"mt-4 text-sm text-neutral-600"},"— ",p.author,p.context?e.createElement("span",{className:"block text-neutral-400 mt-1"},p.context):null))))}))},[c]);return r.length?e.createElement("section",{className:"mx-auto max-w-6xl px-4 md:px-6 lg:px-8"},e.createElement("div",{className:"mb-6 border-b border-neutral-300 pb-3 flex items-end justify-between gap-3"},e.createElement("h3",{className:"text-heading uppercase"},l),s),e.createElement(W,{slides:r,autoPlayMs:7e3,contain:!1,heightClass:"h-auto",showThumbs:!1})):null}const q=[{quote:"The in-home dinner was flawless. Every bite was a delight and the team was professional and kind.",author:"Megan K.",context:"Birthday dinner for 10"},{quote:"Our company happy hour was the best yet—fresh, local, and super tasty.",author:"Chris D.",context:"Corporate event catering"},{quote:"Meal prep has been a lifesaver. Healthy, simple, and actually delicious.",author:"Priya S.",context:"Weekly meal prep client"}],G=()=>{const c=j(),[l,s]=m.useState([]);m.useEffect(()=>{let a=!0;return S.fetch('*[_type == "partner" && published == true] | order(order asc){ name, "publicId": logo.publicId, "image": logo.asset, url }').then(t=>{a&&t&&t.length&&s(t)}).catch(t=>{console.warn("Failed to fetch partners from Sanity, falling back to static list:",t.message)}),()=>{a=!1}},[]);const[r,y]=m.useState(q);m.useEffect(()=>{let a=!0;return S.fetch('*[_type == "testimonial" && published == true] | order(order asc){ author, context, quote }').then(t=>{if(a&&Array.isArray(t)&&t.length){const i=new Set,d=[...t,...q].filter(u=>{const E=`${(u.quote||"").trim()}|${(u.author||"").trim()}`;return i.has(E)?!1:(i.add(E),!0)});y(d)}}).catch(()=>{}),()=>{a=!1}},[]),m.useEffect(()=>{let a=!0;return fetch("/reviews/thumbtack.json").then(n=>n.ok?n.json():null).then(n=>{!a||!Array.isArray(n)||!n.length||y(t=>{const i=new Set;return[...n,...t].filter(u=>{const E=`${(u.quote||"").trim()}|${(u.author||"").trim()}`;return i.has(E)?!1:(i.add(E),!0)})})}).catch(()=>{}),()=>{a=!1}},[]);const k=()=>{const a=(l||[]).filter(t=>t&&t.publicId),n=a.length?a:_;return e.createElement("div",{className:"max-w-6xl mx-auto grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 items-center px-4"},n.map((t,i)=>e.createElement("a",{key:(t.publicId||t.image&&t.image._ref||i)+i,href:t.url||"#",onClick:d=>{t.url||d.preventDefault(),window&&window.gtag&&window.gtag("event","partner_click",{partner:t.name||t.publicId})},className:"flex items-center justify-center p-4 bg-white rounded-lg shadow-sm","aria-label":t.name||`Partner ${i+1}`,rel:"noopener noreferrer",target:t.url?"_blank":void 0},e.createElement(F,{publicId:t.publicId,alt:t.name||`Partner ${i+1}`,width:300,height:80,className:"max-h-16 object-contain grayscale hover:grayscale-0 transition-all",fallbackSrc:t.fallbackSrc||"/gallery/logo.png",resizeMode:"fit"}))))},f={publicId:$,alt:"Local Effort — hero"},v={"@context":"https://schema.org","@type":"ImageObject",contentUrl:`https://res.cloudinary.com/${O.cloudName}/image/upload/f_auto,q_auto/${f.publicId}`,name:f.alt,description:"A sample of the professional in-home dining experience by Local Effort.",creator:{"@type":"Organization",name:"Local Effort"}},[p,g]=m.useState(!1),[o,b]=m.useState({name:"",email:"",sentiment:"positive",message:""}),[x,N]=m.useState("idle");function I(){const[a,n]=m.useState(""),[t,i]=m.useState("idle");return e.createElement("form",{onSubmit:async d=>{if(d.preventDefault(),!!a){i("sending");try{const u=await fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})});if(!u.ok)throw new Error(await u.text());i("ok"),n("")}catch{i("error")}}},className:"mt-4 flex gap-3"},e.createElement("input",{type:"email",required:!0,placeholder:"you@example.com",className:"input flex-1",value:a,onChange:d=>n(d.target.value),"aria-label":"Email address"}),e.createElement("button",{type:"submit",className:"btn btn-primary",disabled:t==="sending"},t==="sending"?"Subscribing…":"Subscribe"),t==="ok"&&e.createElement("span",{className:"text-green-700 text-sm self-center"},"Thanks! You’re on the list."),t==="error"&&e.createElement("span",{className:"text-red-700 text-sm self-center"},"Couldn’t subscribe."))}const M=m.useMemo(()=>p?e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",role:"dialog","aria-modal":"true"},e.createElement("div",{className:"form-card w-full max-w-lg relative"},e.createElement("button",{className:"absolute right-4 top-4 text-sm underline",onClick:()=>g(!1),"aria-label":"Close feedback"},"Close"),e.createElement("h4",{className:"text-xl font-bold mb-2"},"Send Feedback"),e.createElement("p",{className:"text-sm text-gray-600 mb-4"},"We read every note. Thanks for helping us improve."),e.createElement("form",{onSubmit:async a=>{a.preventDefault(),N("sending");try{const n={name:o.name,email:o.email,subject:`Website feedback (${o.sentiment})`,message:o.message,type:"feedback"},t=await fetch("/api/messages/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok)throw new Error(await t.text());N("sent"),b({name:"",email:"",sentiment:"positive",message:""}),setTimeout(()=>g(!1),900)}catch{N("error")}},className:"space-y-3"},e.createElement("div",null,e.createElement("label",{className:"label",htmlFor:"fb-name"},"Name"),e.createElement("input",{id:"fb-name",className:"input",value:o.name,onChange:a=>b({...o,name:a.target.value}),required:!0})),e.createElement("div",null,e.createElement("label",{className:"label",htmlFor:"fb-email"},"Email"),e.createElement("input",{id:"fb-email",type:"email",className:"input",value:o.email,onChange:a=>b({...o,email:a.target.value}),required:!0})),e.createElement("div",null,e.createElement("label",{className:"label",htmlFor:"fb-sentiment"},"Type"),e.createElement("div",{className:"flex gap-4",id:"fb-sentiment"},["positive","neutral","negative"].map(a=>e.createElement("label",{key:a,className:"inline-flex items-center gap-2"},e.createElement("input",{type:"radio",name:"sentiment",value:a,checked:o.sentiment===a,onChange:()=>b({...o,sentiment:a})}),e.createElement("span",{className:"capitalize"},a))))),e.createElement("div",null,e.createElement("label",{className:"label",htmlFor:"fb-message"},"Message"),e.createElement("textarea",{id:"fb-message",className:"textarea",value:o.message,onChange:a=>b({...o,message:a.target.value}),rows:5,required:!0})),e.createElement("div",{className:"flex items-center gap-3"},e.createElement("button",{type:"submit",className:"btn btn-primary",disabled:x==="sending"},x==="sending"?"Sending…":"Send feedback"),x==="sent"&&e.createElement("span",{className:"text-green-700 text-sm"},"Thanks! Sent."),x==="error"&&e.createElement("span",{className:"text-red-700 text-sm"},"Could not send. Try again."))))):null,[p,o,x]);return e.createElement(e.Fragment,null,e.createElement(L,null,e.createElement("title",null,"Local Effort | Personal Chef & Event Catering in Roseville, MN"),e.createElement("meta",{name:"description",content:"Local Effort offers personal chef services, event catering, and weekly meal prep in Roseville, MN."}),e.createElement("script",{type:"application/ld+json"},JSON.stringify(v)),e.createElement("script",{type:"application/ld+json"},JSON.stringify({"@context":"https://schema.org","@type":["Restaurant","Caterer"],name:"Local Effort",url:"https://local-effort-app.vercel.app/",address:{"@type":"PostalAddress",addressLocality:"Roseville",addressRegion:"MN",addressCountry:"US"},servesCuisine:["American","Local","Farm to Table","Seasonal"],priceRange:"$$"}))),e.createElement("div",{className:"space-y-24"},!1,e.createElement("section",{className:"mx-auto max-w-6xl px-4 md:px-6 lg:px-8 grid md:grid-cols-2 gap-8 items-center min-h-[60vh]"},e.createElement("div",null,e.createElement(h.h2,{variants:C,initial:"initial",animate:"animate",className:"text-4xl md:text-6xl font-bold uppercase tracking-[-0.02em] leading-[1.02]"},"Minnesotan Food"),e.createElement(h.h3,{variants:C,initial:"initial",animate:"animate",transition:{delay:.05},className:"text-4xl md:text-6xl font-bold uppercase text-neutral-400 tracking-[-0.02em] leading-[1.0] -mt-3 md:-mt-5 lg:-mt-6"},"For Your Functions."),e.createElement(h.p,{variants:z,initial:"initial",animate:"animate",className:"mt-6 md:mt-8 text-body max-w-md"},"Event hospitality and personal chef services, with an obsessive focus on local ingredients."),e.createElement(h.button,{whileHover:{scale:1.03},whileTap:{scale:.98},onClick:()=>c("/services#event-request"),className:"btn btn-primary mt-8 text-lg"},"Book an event")),e.createElement(h.div,{className:"w-full min-h-[400px] h-full rounded-xl overflow-hidden",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6}},e.createElement(F,{publicId:f.publicId,alt:f.alt,width:600,height:600,className:"w-full h-full object-cover",fallbackSrc:R,sizes:"(min-width: 1024px) 50vw, 100vw",eager:!0}))),e.createElement("section",{className:"mx-auto max-w-3xl px-4 md:px-6 lg:px-8"},e.createElement("div",{className:"form-card"},e.createElement("h3",{className:"text-xl font-bold"},"Subscribe to our email list"),e.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Occasional updates about seasonal menus, events, and meal prep openings."),e.createElement(I,null))),e.createElement("section",{className:"py-12"},e.createElement("h3",{className:"text-heading uppercase text-center mb-4"},"Our Partners"),e.createElement("p",{className:"text-center text-sm text-gray-600 max-w-2xl mx-auto mb-6"},"Proud partners who help make this project possible. Support local — shop and collaborate with them."),e.createElement(k,null)),e.createElement("section",{className:"mx-auto max-w-6xl px-4 md:px-6 lg:px-8"},e.createElement("h3",{className:"text-heading uppercase mb-6 border-b border-neutral-300 pb-3"},"What We Do"),e.createElement("div",{className:"grid md:grid-cols-3 gap-6"},e.createElement(w,{to:"/events",title:"Dinners & Events",description:"in-home dinner parties and small events up to 50"}),e.createElement(w,{to:"/meal-prep",title:"Weekly Meal Prep",description:"Basic, good nutrition from local Midwest sources."}),e.createElement(w,{to:"/pizza-party",title:"Pizza Parties",description:"local pizza at your party. we'll bring the oven."}))),e.createElement(J,{items:r,title:"Feedback",headingExtra:e.createElement("span",{className:"text-sm text-neutral-600"},"Want to ",e.createElement("button",{className:"underline",onClick:()=>g(!0)},"provide feedback"),"?")}),M))};export{G as default};
