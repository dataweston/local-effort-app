import{r as l,u as b,R as r}from"./index-BB2wScGM.js";import{a,o as h,g as x,b as d,s as y,c as E}from"./firebaseConfig-BKUbzniN.js";function v(){const[e,n]=l.useState(null),[i,o]=l.useState(!0);return l.useEffect(()=>{if(!a)return o(!1),()=>{};const s=h(a,c=>{n(c||null),o(!1)});return()=>s()},[]),{user:e,loading:i}}function N(){const e=b(),{user:n,loading:i}=v(),[o,s]=r.useState(""),[c,g]=r.useState(!1);r.useEffect(()=>{(async()=>{if(a)try{const t=await x(a);t&&t.user&&e("/partner-portal",{replace:!0})}catch(t){s(p(t))}})(),!i&&n&&e("/partner-portal",{replace:!0})},[n,i,e]);const m=async()=>{if(s(""),!a||!d){s("Sign-in is unavailable. Missing Firebase configuration.");return}g(!0);try{await y(a,d),e("/partner-portal",{replace:!0})}catch(t){const u=t&&t.code?String(t.code):"";if(u.includes("popup-blocked")||u.includes("popup-closed-by-user")||u.includes("cancelled-popup-request"))try{await E(a,d);return}catch(f){s(p(f))}else s(p(t))}finally{g(!1)}};return r.createElement("div",{className:"mx-auto max-w-md p-6 text-center"},r.createElement("h1",{className:"text-2xl font-semibold mb-4"},"Sign in"),o&&r.createElement("div",{className:"mb-4 p-3 rounded bg-red-50 text-red-700 text-sm text-left"},o),r.createElement("button",{onClick:m,disabled:c,className:"px-4 py-2 rounded bg-black text-white disabled:opacity-60"},c?"Workingâ€¦":"Continue with Google"),!a&&r.createElement("p",{className:"mt-4 text-sm text-gray-600"},"Tip: Add Firebase env vars on the server and authorize your Vercel domain in Firebase Auth."))}function p(e){return e?(e.message||String(e)).replace(/^Firebase: /,"").replace(/\(auth\/[\w-]+\)\.?$/,"").trim():"Unexpected error."}export{N as default};
