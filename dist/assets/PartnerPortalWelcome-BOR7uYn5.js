import{R as e,W as g,L as u,v as E,x as b,y as x,z as d,B as h}from"./index-C77HZ0tF.js";import{u as p}from"./useAuthUser-D56VcM0P.js";import{I as y,A as N}from"./lucide-react-MXM2L0f7.js";import"./plus-DU7HzEsv.js";import"./send-DWY1Taua.js";import"./calendar-D3WII-Ps.js";import"./x-pWXhR37Q.js";import"./users-BNbN0XJ7.js";import"./minus-Rh3Z7vfy.js";import"./trash-2-B7eCmmW6.js";function T(){const{user:r,loading:l}=p(),[m,o]=e.useState(null),[t,s]=e.useState(!1),[i,a]=e.useState(null);return e.useEffect(()=>{let c=!1;return(async()=>{if(!r){o(null),a(null);return}s(!0),a(null);try{const n=await E(r.uid);c||(o(n||null),n||a(null))}catch(n){if(!c){const f=n&&n.code;a(f==="permission-denied"?"You are signed in but do not have permission to load your partner profile. Ask an admin to grant access.":n.message||"Failed to load profile"),o(null)}}finally{c||s(!1)}})(),()=>{c=!0}},[r]),e.createElement(e.Fragment,null,e.createElement(g,null,e.createElement("title",null,"Partner Portal | Welcome"),e.createElement("meta",{name:"description",content:"Local Effort partner tools and resources."})),e.createElement("div",{className:"space-y-6"},e.createElement("h2",{className:"text-5xl md:text-7xl font-bold uppercase"},"Partner Portal"),e.createElement("p",{className:"text-body max-w-2xl"},"Welcome! Access tools and resources for partners. Sign in to see your tools."),!l&&!r&&e.createElement("div",{className:"p-6 border rounded-md max-w-xl bg-neutral-50"},e.createElement("h3",{className:"text-xl font-semibold mb-2"},"Sign in required"),e.createElement("p",{className:"mb-4 text-gray-600"},"Use your Google account to continue."),e.createElement(u,{to:"/auth",className:"inline-block px-4 py-2 rounded bg-black text-white"},"Continue with Google")),r&&e.createElement(e.Fragment,null,i&&e.createElement("div",{className:"p-4 border border-amber-300 bg-amber-50 rounded text-sm text-amber-800 mb-4"},i),e.createElement(v,{profile:m,loading:t}))))}function v({profile:r}){const{user:l}=p(),o=b(r)||x(l==null?void 0:l.email)?d:d.filter(t=>h(r,t.key));return e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},o.map(t=>{const s=y[t.icon]||N,i=t.type==="external"&&t.href,a=e.createElement("div",{className:"group block p-5 border rounded-xl hover:shadow transition bg-white"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-lg bg-neutral-100 group-hover:bg-neutral-200"},e.createElement(s,{className:"w-5 h-5 text-neutral-800"})),e.createElement("div",null,e.createElement("div",{className:"font-semibold"},t.name),e.createElement("div",{className:"text-sm text-neutral-600"},t.description))));return i?e.createElement("a",{key:t.key,href:t.href,target:"_blank",rel:"noopener noreferrer"},a):e.createElement(u,{key:t.key,to:t.route},a)}))}export{T as default};
